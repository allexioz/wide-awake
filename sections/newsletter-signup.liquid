<section class="newsletter-signup">
  <div class="container">
    <div class="newsletter-content">
      <div class="newsletter-header">
        <h2 class="newsletter-title">{{ section.settings.title | default: "Newsletter" }}</h2>
        <p class="newsletter-description">{{ section.settings.lead_text | default: "Stay updated with our latest coffee news and releases." }}</p>
      </div>
      
      <div class="newsletter-form-wrapper">
        {% form 'customer', class: 'signup-form' %}
          {% if form.posted_successfully? %}
            <div class="success-message">
              <p>Thanks for subscribing!</p>
            </div>
          {% else %}
            <div class="form-fields">
              <input 
                type="email" 
                name="contact[email]" 
                id="newsletter-email"
                placeholder="{{ section.settings.email_placeholder | default: 'Enter your email' }}"
                required
                class="newsletter-input"
              >
              <label for="newsletter-email" class="sr-only">Email Address</label>
              
              <button type="submit" class="newsletter-submit">
                {{ section.settings.submit_text | default: "Subscribe" }}
              </button>
            </div>
            
            {% if form.errors %}
              <div class="error-message">
                {% for error in form.errors %}
                  <p>{{ error }}</p>
                {% endfor %}
              </div>
            {% endif %}
            
            <input type="hidden" name="contact[tags]" value="newsletter">
          {% endif %}
        {% endform %}
      </div>
    </div>
  </div>
</section>

{% stylesheet %}
  .newsletter-signup {
    padding: 60px 0;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
  }

  .newsletter-content {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }

  .newsletter-header {
    margin-bottom: 30px;
  }

  .newsletter-title {
    font-family: 'Poppins', sans-serif;
    font-size: 1.8rem;
    font-weight: 600;
    color: #333;
    margin: 0 0 12px 0;
  }

  .newsletter-description {
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
    color: #666;
    line-height: 1.5;
    margin: 0;
  }

  .newsletter-form-wrapper {
    max-width: 400px;
    margin: 0 auto;
  }

  .form-fields {
    display: flex;
    gap: 12px;
    margin-bottom: 15px;
  }

  .newsletter-input {
    flex: 1;
    padding: 12px 16px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background: white;
    color: #333;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
  }

  .newsletter-input::placeholder {
    color: #999;
  }

  .newsletter-input:focus {
    outline: none;
    border-color: #333;
  }

  .newsletter-submit {
    padding: 12px 24px;
    background: #333;
    color: white;
    border: none;
    border-radius: 4px;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
  }

  .newsletter-submit:hover {
    background: #555;
  }

  .success-message {
    padding: 20px;
    background: #d4edda;
    color: #155724;
    border-radius: 4px;
    font-family: 'Poppins', sans-serif;
  }

  .success-message p {
    margin: 0;
  }

  .error-message {
    margin-top: 10px;
    padding: 10px;
    background: #f8d7da;
    color: #721c24;
    border-radius: 4px;
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
  }

  .error-message p {
    margin: 0;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Mobile responsive */
  @media (max-width: 600px) {
    .form-fields {
      flex-direction: column;
    }
    
    .newsletter-submit {
      width: 100%;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Newsletter Signup",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Newsletter"
    },
    {
      "type": "textarea",
      "id": "lead_text",
      "label": "Description",
      "default": "Stay updated with our latest coffee news and releases."
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Email Placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "submit_text",
      "label": "Submit Button Text",
      "default": "Subscribe"
    }
  ],
  "presets": [
    {
      "name": "Newsletter Signup"
    }
  ]
}
{% endschema %} 